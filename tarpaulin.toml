[report]
out = ["Html", "Lcov"]

[coverage]
# Exclude patched dependencies from coverage
exclude-files = [
    "patches/*",
    "target/*",
    "src/main.rs",
    "src/api/dto.rs",
    "src/storage/entities/*.rs",
]

# Exclude generated code
exclude-lines = [
    "^\\s*#\\[derive\\(",
    "^\\s*todo!",
    "^\\s*unimplemented!",
    "^\\s*unreachable!",
    # Health check error paths
    "checks\\[\"status\"\\] = \"unhealthy\"",
    # Database connection errors
    "StatusCode::INTERNAL_SERVER_ERROR.*error: e.to_string",
]

# Engine options
engine = "Llvm"
